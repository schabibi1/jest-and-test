# Jestã®åŸºæœ¬ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹

å‰å›žã®ãƒ¬ãƒƒã‚¹ãƒ³ã§ã¯ã€Jestã‚’ä½¿ã£ãŸãƒ†ã‚¹ãƒˆé–‹ç™ºç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ–¹æ³•ã‚’å­¦ç¿’ã—ã¾ã—ãŸã€‚

ã“ã®ãƒ¬ãƒƒã‚¹ãƒ³ã§ã¯ã€ã„ã‚ˆã„ã‚ˆå®Ÿéš›ã«ãƒ†ã‚¹ãƒˆã‚’æ›¸ã„ã¦ã„ãã¾ã™ã€‚

ãƒ†ã‚¹ãƒˆã‚’æ›¸ã„ã¦ã„ããŸã‚ã«ã¯ã€Jestã®åŸºæœ¬çš„ãªã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ã‚’å­¦ç¿’ã—ã¾ã™ã€‚

## testãƒ–ãƒ­ãƒƒã‚¯

ã“ã¡ã‚‰ã«ã¤ã„ã¦ã¯ã€å‰å›žã®ãƒ¬ãƒƒã‚¹ãƒ³ã§å­¦ç¿’ã—ãŸé€šã‚Šã§ã™ã€‚

## Expecté–¢æ•°

Jestã§ã¯ã€ãƒ†ã‚¹ãƒˆå¯¾è±¡ã®å€¤ã‚„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§äºˆæœŸã™ã‚‹ã‚‚ã®ãŒè¿”ã£ã¦ãã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’ã€expecté–¢æ•°ã§ãƒã‚§ãƒƒã‚¯ã—ã¾ã™ã€‚

ä»¥ä¸‹ã®Matchersã¨åˆã‚ã›ã¦ä½¿ç”¨ã—ã¾ã™ã€‚

 `expext()` é–¢æ•°ã§è¿”ã‚‹å€¤ã¯ã€**expectationã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ**ã¨å‘¼ã°ã‚Œã‚‹ã‚‚ã®ã§ã€è¿”ã‚Šå€¤ã®è¨­å®šãŒã§ãã¾ã™ã€‚

 `expect(4 + 4)` ã§ã‚ã‚Œã°ã€4 + 4ã‚’è¿”ã‚Šå€¤ã¨ã—ã¦æŒ‡å®šã‚’ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

## Matchers

ãƒ†ã‚¹ãƒˆå¯¾è±¡ã®å€¤ã€ã‚‚ã—ãã¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒã€æœŸå¾…é€šã‚Šã®å€¤ã§è¿”ã£ã¦ãã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’ã€expecté–¢æ•°ã‚’ä½¿ã£ã¦ç¢ºèªã™ã‚‹ã“ã¨ã‚’å­¦ç¿’ã—ã¾ã—ãŸã€‚

ãŸã ã€expecté–¢æ•°ã ã‘ã§ã¯ã€æœ€çµ‚çš„ãªå€¤ã®ãƒã‚§ãƒƒã‚¯ã¯å®Œäº†ã—ã¾ã›ã‚“ã€‚

ã©ã†ã™ã‚Œã°å®Œäº†ã™ã‚‹ã‹ã¨ã„ã†ã¨ã€expecté–¢æ•°ã®å¾Œã«ã€**matcher**ã¨å‘¼ã°ã‚Œã‚‹é–¢æ•°ã‚’å‘¼ã³å‡ºã—ã€å€¤ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¾ã™ã€‚

ã©ã¡ã‚‰ã‚‚testãƒ–ãƒ­ãƒƒã‚¯ã¨åˆã‚ã›ã¦ä½¿ç”¨ã—ã¾ã™ã€‚

åŸºæœ¬ã®ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ã¯ã€ä»¥ä¸‹ã§ã™ã€‚

```javascript
test("ãƒ†ã‚¹ãƒˆå†…å®¹ã®èª¬æ˜Ž", () => {
  expect(ãƒ†ã‚¹ãƒˆå¯¾è±¡ã®å€¤ã‚„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ).matcher(ãƒ†ã‚¹ãƒˆå¯¾è±¡ã«æœŸå¾…ã™ã‚‹çµæžœã®å€¤ã‚„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ);
});
```

ã“ã“ã§ã€å‰å›žã®ãƒ¬ãƒƒã‚¹ãƒ³ã§ä½¿ç”¨ã—ãŸã€sum.test.jsãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚‚ã†ä¸€åº¦ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```javascript
// sum.test.js

import sum from './sum';

test('1 + 2 ã¯ 3ã¨ç­‰ã—ã„', () => {
  expect(sum(1, 2)).toBe(3);
});
```

ã¯ã£ãã‚Šã¨testãƒ–ãƒ­ãƒƒã‚¯ã€expecté–¢æ•°ã€matcherãŒã€æ§‹æˆã‚‚åˆã‚ã›ã¦ç¢ºèªã§ãã¾ã—ãŸã­ã€‚

sum.test.jsã§ã¯ã€matcherã« `.toBe()` ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚

matcherã«ã¯ã€ã„ãã¤ã‹ç¨®é¡žãŒã‚ã‚Šã¾ã™ã®ã§ã€ã¾ãšã¯ `.toBe()` ã‹ã‚‰è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

### .toBe(value)

sum.test.jsã§ `.toBe()` ã¯ä½¿ç”¨ã—ã¾ã—ãŸã­ã€‚

 `.toBe()` ã¯ã€æŒ‡å®šã—ãŸå€¤ã¨ã€å…¨ãåŒã˜å€¤ãŒè¿”ã‚‹ã‹ã©ã†ã‹ã‚’ãƒ†ã‚¹ãƒˆã—ã¾ã™ã€‚

### .toEqual(value)

ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚„é…åˆ—ã®å€¤ã‚’ãƒ†ã‚¹ãƒˆã—ãŸã„å ´åˆã¯ã€ `.toEqual()` ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

 `.toBe()` ã‹ã‚‰ç”±æ¥ã—ã¦ã„ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã§ã™ãŒã€ãƒ†ã‚¹ãƒˆã—ãŸã„å¯¾è±¡ã®å€¤ãŒã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€ã‚‚ã—ãã¯é…åˆ—ã®å ´åˆã¯ã€ `.toEqual()` ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒæŽ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ã€‚

```javascript
// matcher.js

let myPet = {name: 'Tama'};
myPet = {name: 'Tama', age: 2};

export default myPet;
```

```javascript
// matcher.test.js

import myPet from './matchers';

test('Testing object', () => {
  expect(myPet).toEqual({name: 'Tama', age: 2});
});
```

### .not.matchers(value)

 `.toEqual()` ã‚„ `.toBe()` ã¯ã€æœŸå¾…ã—ãŸå€¤ã¨ã€ç­‰ã—ããªã‚‹å€¤ã®ãƒ†ã‚¹ãƒˆã‚’è¡Œã„ã¾ã™ãŒã€ `.not` ã‚’ç›´å‰ã«ä»˜ä¸Žã™ã‚‹ã“ã¨ã§ã€**æœŸå¾…ã—ãŸå€¤ã¨ç­‰ã—ããªã‚‰ãªã„ã‹ã©ã†ã‹**ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

å…ˆã»ã©ã® `.toEqual()` ã®ä¾‹ã‚’ `.not` ã‚’ä»˜ä¸Žã—ã¦ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¦ã¿ã¾ã™ã€‚

```javascript
// matcher.js

let myPet = {name: 'Tama'};
myPet = {name: 'Tama', age: 2};

export default myPet;
```

```javascript
// matcher.test.js

import myPet from './matchers';

test('Testing object', () => {
  expect(myPet).not.toEqual({name: 'Tama', age: 2});
});
```

![not-sample](../images/not-sample.png)

ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å€¤ã¯ã€`{name: 'Tama', age: 2}` ã§ç­‰ã—ã„ã®ã§ã€ `.not` ãŒã¤ãã¨ãƒ†ã‚¹ãƒˆãŒé€šã‚‰ãªã„ã®ãŒç¢ºèªã§ãã¾ã™ã­ã€‚

 `{name: 'Tama', age: 2}` ã¨ç­‰ã—ããªã„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å€¤ã§ã‚ã‚Œã°ã€ãƒ†ã‚¹ãƒˆãŒé€šã‚Šã¾ã™ã€‚

### Truthiness çœŸå½å€¤(undefined, null, false)

undefinedã‚„nullã€falseã¨ã„ã£ãŸå€¤ã‚’ã€ãã‚Œãžã‚ŒåŒºåˆ¥ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„å ´åˆã«ã¯ã€ä»¥ä¸‹ã®matchersã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

å€¤ | Matchers
------------ | -------------
null | .toBeNull()
undefined | .toBeUndefined()
undefinedã§ã¯ãªã„å ´åˆ | .toBeDefined()
ifæ–‡ã§å€¤ãŒtrueã‚’è¿”ã™å ´åˆ | .toBeTruthy()
ifæ–‡ã§å€¤ãŒfalseã‚’è¿”ã™å ´åˆ | .toBeFalsy()

```javascript
// truthiness.test.js

test('null', () => {
  const n = null;
  expect(n).toBeNull();// nullã¨ç­‰ã—ã„
  expect(n).toBeDefined();// undefinedã§ã¯ãªã„ã®ã§æ­£ã—ã„
  expect(n).not.toBeUndefined();// undefinedã§ã¯ãªã„ã®ã§æ­£ã—ã„
  expect(n).not.toBeTruthy();// nullã¯æ¡ä»¶åˆ†å²ã§trueã‚’è¿”ã•ãªã„ã®ã§æ­£ã—ã„
  expect(n).toBeFalsy();// nullã¯æ¡ä»¶åˆ†å²ã§falseã‚’è¿”ã™ã®ã§æ­£ã—ã„
});

test('zero', () => {
  const z = 0;
  expect(z).not.toBeNull();// nullã§ã¯ãªã„ã®ã§æ­£ã—ã„
  expect(z).toBeDefined();// undefinedã§ã¯ãªã„ã®ã§æ­£ã—ã„
  expect(z).not.toBeUndefined();// undefinedã§ã¯ãªã„ã®ã§æ­£ã—ã„
  expect(z).not.toBeTruthy();// æ•°å€¤ã®0ã¯ã¯æ¡ä»¶åˆ†å²ã§trueã‚’è¿”ã•ãªã„ã®ã§æ­£ã—ã„
  expect(z).toBeFalsy();// æ•°å€¤ã®0ã¯æ¡ä»¶åˆ†å²ã§falseã‚’è¿”ã™ã®ã§æ­£ã—ã„
});
```

### æ•°å€¤

æ•°å€¤ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹matchersã«ã¯ã€ã„ãã¤ã‹ç¨®é¡žãŒã‚ã‚Šã¾ã™ã€‚

ãƒ†ã‚¹ãƒˆç›®çš„ | Matchers
------------ | -------------
ã€œã€œã‚ˆã‚Šå¤§ãã„ | .toBeGreaterThan()
ã€œã€œã‚ˆã‚Šå¤§ãã„ã€ã‚‚ã—ãã¯ç­‰ã—ã„ | .toBeGreaterThanOrEqual()
ã€œã€œã‚ˆã‚Šå°ã•ã„ | .toBeLessThan()
ã€œã€œã‚ˆã‚Šå°ã•ã„ã€ã‚‚ã—ãã¯ç­‰ã—ã„ | .toBeLessThanOrEqual()
ä¸å‹•å°æ•°ç‚¹ã®å€¤ãŒç­‰ã—ã„ã‹ã©ã†ã‹ | .toBeCloseTo()

> ðŸ’¡ å…ˆã»ã©å­¦ç¿’ã‚’ã—ãŸ `.toBe()` ã¨ `.toEqual()` ã‚‚æ•°å€¤ã«ã¯ä½¿ç”¨ã§ãã¾ã™ã€‚

> âœ‹ ä¸å‹•å°æ•°ç‚¹ã®è¨ˆç®—ã‚’ã™ã‚‹å ´åˆã€ç¹°ã‚Šä¸Šã’ãŒå¿…è¦ãªå ´åˆã«èª¤å·®ãŒç”Ÿã˜ã¾ã™ã€‚ä¸å‹•å°æ•°ç‚¹ã‚’æ‰±ã†ãƒ†ã‚¹ãƒˆã§ã¯ `.toEqual()` ã§ã¯ãªã `.toBeCloseTo` ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒæŽ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ã€‚

```javascript
test('ä¸ç·å°æ•°ç‚¹ã®åŠ ç®—ãƒ†ã‚¹ãƒˆ', () => {
  const value = 0.3 + 0.2;
  //expect(value).toBe(0.5); â† ã“ã‚Œã¯ç¹°ã‚Šä¸Šã’å€¤ã§ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ãŸã‚ç„¡åŠ¹
  expect(value).toBeCloseTo(0.5); // â† ã“ã¡ã‚‰ã¯æœ‰åŠ¹
});
```

### æ–‡å­—åˆ—

æ–‡å­—åˆ—ã®ãƒ†ã‚¹ãƒˆã«ã¯ã€ã“ã¡ã‚‰ã®1ç¨®é¡žã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

å€¤ | Matchers
------------ | -------------
æ–‡å­—åˆ— | .toMatch()

æ–‡å­—åˆ—ã«å¯¾ã—ã¦ã€ `.toMatch()` ã¯ã€æ­£è¦è¡¨ç¾ã§å€¤ãŒç­‰ã—ã„ã‹ã©ã†ã‹ç¢ºèªã§ãã¾ã™ã€‚

```javascript
test('no I in the word of hoge', () => {
  expect('hoge').not.toMatch(/I/);
});

test('but there is a "oo" in foo!', () => {
  expect('foo!').toMatch(/oo/);
});
```

æ—¥æœ¬èªžã§ã‚‚æ–‡å­—åˆ—ã®ãƒ†ã‚¹ãƒˆã¯å¯èƒ½ã§ã™ã€‚

```javascript
test('æ—¥æœ¬èªžæ–‡å­—åˆ—ãƒ†ã‚¹ãƒˆ', () => {
  expect('ã½ã½ãƒ¼').toMatch(/ã½/);
});
```

çµµæ–‡å­—ã§ã‚‚å¯èƒ½ã§ã™ã€‚

```javascript
test('çµµæ–‡å­—ãƒ†ã‚¹ãƒˆ', () => {
  expect('ðŸ¥‹').toMatch(/ðŸ¥‹/);
});
```

### é…åˆ—ã¨åå¾©å¯èƒ½ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼ˆarray & iterablesï¼‰

é…åˆ—ã‚„åå¾©å¯èƒ½ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¯¾ã—ã¦ã€ç‰¹å®šã®ã‚¢ã‚¤ãƒ†ãƒ ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®Matcherã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

å€¤ | Matchers
------------ | -------------
é…åˆ— & åå¾©å¯èƒ½ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ | .toContain()

```javascript
const todoList = [
  'joggingðŸƒâ€â™€ï¸',
  'weight trainingðŸ’ª',
  'workðŸ‘©â€ðŸ’»',
  'go to post officeðŸ“®',
  'yogaðŸ§˜â€â™€ï¸',
];

test('the todo list has yoga on it', () => {
  expect(todoList).toContain('yoga'ðŸ§˜â€â™€ï¸);
  expect(new Set(todoList)).toContain('yogaðŸ§˜â€â™€ï¸');
});
```

### ä¾‹å¤–

é–¢æ•°å®Ÿè¡Œæ™‚ã«ã€æƒ³å®šå¤–ã®ã“ã¨ãŒèµ·ã“ã£ãŸéš›ã®ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã«ã€ä»¥ä¸‹ã®MatcherãŒä½¿ç”¨ã§ãã¾ã™ã€‚

å€¤ | Matchers
------------ | -------------
æƒ³å®šå¤–ã®å€¤ | .toThrow()

```javascript
function showUsers() {
  throw new Error('You got a glitch!');
}

test('getting users as expected', () => {
  expect(showUsers).toThrow();
  expect(showUsers).toThrow(Error);

  // You can also use the exact error message or a regexp
  expect(showUsers).toThrow('You got a glitch!');
  expect(showUsers).toThrow(/glitch/);
});
```